generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider     = "mongodb"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

type AnnotatedPdfHighlightNode {
  comments  AnnotatedPdfHighlightComment[]
  prompt    String?
  response  String?
  content   AnnotatedPdfHighlightContent
  id        String
  position  AnnotatedPdfHighlightPosition
  nodes     AnnotatedPdfHighlightNode[]
  timestamp DateTime                       @db.Date
}

type AnnotatedPdfHighlight {
  comments  AnnotatedPdfHighlightComment[]
  prompt    String?
  response  String?
  content   AnnotatedPdfHighlightContent
  id        String
  position  AnnotatedPdfHighlightPosition
  nodes     AnnotatedPdfHighlightNode[]
  timestamp DateTime                       @db.Date
}

type AnnotatedPdfHighlightComment {
  emoji     String?
  text      String?
  timestamp DateTime @db.Date
  userId    String
}

type AnnotatedPdfHighlightContent {
  image String?
  text  String?
}

type AnnotatedPdfHighlightPosition {
  boundingRect      AnnotatedPdfHighlightScaledPosition
  pageNumber        Int
  rects             AnnotatedPdfHighlightScaledPosition[]
  usePdfCoordinates Boolean?
}

type AnnotatedPdfHighlightScaledPosition {
  height     Float
  width      Float
  x1         Float
  y1         Float
  x2         Float
  y2         Float
  pageNumber Int?
}

model AnnotatedPdf {
  id         String                  @id @default(auto()) @map("_id") @db.ObjectId
  highlights AnnotatedPdfHighlight[]
  source     String
  userId     String
}

model User {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  clerk_id   String
  email      String
  first_name String
  followers  String[]
  follows    String[]
  handle     String
  last_name  String
}
